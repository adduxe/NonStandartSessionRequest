"use strict";function getCampusLocation(n,t){for(var r="",i=0;i<t.length;++i)if(t[i].campusCode==n){r=t[i].campusName;break}return r}function GetFeeDescription(n,t){for(var f="",i="",r="",u=0;u<t.length;++u)i=t[u],r=i.substring(0,i.indexOf(" ")),r===n&&(f=i.substring(r.length,i.length));return f}var adminModule=angular.module("adminModule",["ngResource","kendo.directives"]),sessionModule=angular.module("sessionModule",["ngResource","ngRoute","kendo.directives"]);sessionModule.config(["$routeProvider","$locationProvider",function(n,t){n.when("/",{templateUrl:"scripts/app/views/SessionRequest.html",controller:"sessionRequestCtrl"}).when("/Result",{templateUrl:"scripts/app/views/SessionResult.html",controller:"sessionResultCtrl"}).otherwise({redirectTo:"/"});t.html5Mode(!0)}]);sessionModule.factory("Get001Dates",["$resource",function(n){return n("api/sessions/:semester/001",{semester:"@id"})}]);sessionModule.factory("SemStartDates",["$resource",function(){var i=new Date,n=i.getFullYear(),t=parseInt(n)+1,f={spring:new Date("01/01/"+n),summer:new Date("05/01/"+n),fall:new Date("08/01/"+n)},o=f.spring,e=f.summer,s=f.fall,r=[],u=null;return i>=o&&i<e?(u=o,r=[{semName:n+" Spring",semCode:n+"1"},{semName:n+" Summer",semCode:n+"2"},{semName:n+" Fall",semCode:n+"3"},{semName:t+" Spring",semCode:t+"1"}]):i>=e&&i<s?(u=e,r=[{semName:n+" Summer",semCode:n+"2"},{semName:n+" Fall",semCode:n+"3"},{semName:t+" Spring",semCode:t+"1"},{semName:t+" Summer",semCode:t+"2"}]):(u=s,r=[{semName:n+" Fall",semCode:n+"3"},{semName:t+" Spring",semCode:t+"1"},{semName:t+" Summer",semCode:t+"2"},{semName:t+" Fall",semCode:t+"3"}]),{sStart:u,sChoices:r}}]);sessionModule.factory("Sessions",["$resource",function(n){return n("api/sessionrequests/:requestId",{requestId:"@id"})}]);adminModule.factory("CampusLocations",["$resource",function(n){return n("api/usclocations")}]);sessionModule.factory("CampusLocations",["$resource",function(n){return n("api/usclocations")}]);adminModule.factory("GetSpecialFeeCodes",["$resource",function(n){return n("api/specialfeecodes/:term",{term:"@id"})}]);sessionModule.factory("GetSpecialFeeCodes",["$resource",function(n){return n("api/specialfeecodes/:term",{term:"@id"})}]);adminModule.factory("GetSpecialFeeDescription",[function(){return function(n,t){return GetFeeDescription(n,t)}}]);sessionModule.factory("GetSpecialFeeDescription",[function(){return function(n,t){return GetFeeDescription(n,t)}}]);adminModule.factory("RateTable",["$resource",function(n){return n("api/ratetable")}]);sessionModule.factory("RateTable",["$resource",function(n){return n("api/ratetable")}]);sessionModule.factory("SessionCodes",["$resource",function(n){return n("api/sessioncodes")}]);adminModule.factory("SessionCodes",["$resource",function(n){return n("api/sessioncodes")}]);sessionModule.controller("indexCtrl",["$scope","$q",function(n){var t=function(){n.notifyOptions={autoHideAfter:7e3,templates:[{type:"error",template:$("#errorTemplate").html()},{type:"info",template:$("#infoTemplate").html()},{type:"warning",template:$("#warningTemplate").html()},{type:"success",template:$("#successTemplate").html()}]};n.showNotification=function(t,i){n.winNotification.show({title:t.charAt(0).toUpperCase()+t.slice(1),message:i},t)}};t()}]);sessionModule.controller("sessionRequestCtrl",["RateTable","Sessions","Get001Dates","SessionCodes","CampusLocations","SemStartDates","GetSpecialFeeCodes","$scope","$http","$location","$rootScope",function(n,t,i,r,u,f,e,o,s,h,c){function w(n){var t="",i={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};do{switch(n.getDay()){case i.Sunday:n.setDate(n.getDate()+1);break;case i.Saturday:n.setDate(n.getDate()+2)}t=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear();a.indexOf(t)>-1&&(n.setDate(n.getDate()+1),t=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear())}while(n.getDay()==0||n.getDay()==6||a.indexOf(t)>-1);return n}function v(n,t,i){var f=Date.dateDiff("d",n,t)+1,e=Math.round(f*(i/100)),u=new Date(n),r;return u.setDate(n.getDate()+e-1),r=w(u),r>t&&(r=t),r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear()}function l(n){var i="",t;return n&&(t=new Date(n.trim()),i=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()),i}function y(n,t){o.session.lastDayForAddDrop=v(n,t,20);o.session.lastDayForEnrollmentOptionChange=v(n,t,40);o.session.lastDayForWithdrawal=v(n,t,80);return}function b(){var i=new Date,n=i.getFullYear(),t=parseInt(n)+1,f=new Date("01/01/"+n),r=new Date("05/01/"+n),e=new Date("08/01/"+n),u=[];u=i>=f&&i<r?[{semName:n+" Spring",semCode:n+"1"},{semName:n+" Summer",semCode:n+"2"},{semName:n+" Fall",semCode:n+"3"},{semName:t+" Spring",semCode:t+"1"}]:i>=r&&i<e?[{semName:n+" Summer",semCode:n+"2"},{semName:n+" Fall",semCode:n+"3"},{semName:t+" Spring",semCode:t+"1"},{semName:t+" Summer",semCode:t+"2"}]:[{semName:n+" Fall",semCode:n+"3"},{semName:t+" Spring",semCode:t+"1"},{semName:t+" Summer",semCode:t+"2"},{semName:t+" Fall",semCode:t+"3"}];o.semesters=u}function k(){a=["1/2/2017","1/16/2017","2/20/2017","5/29/2017","7/3/2017","7/4/2017","9/14/2017","11/23/2017","11/24/2017","11/24/2017","12/25/2017","12/26/2017","12/27/2017","12/28/2017","12/29/2017","1/1/2018","1/15/2018","2/19/2018","5/28/2018","7/4/2018","9/3/2018","11/22/2018","11/23/2018","12/24/2018","12/25/2018","12/25/2018","12/26/2018","12/27/2018","12/28/2018","12/29/2018","12/30/2017","12/31/2018","1/1/2019","1/21/2019","2/18/2019","5/27/2019","7/4/2019","7/5/2019","9/2/2019","11/28/2019","11/29/2019","12/25/2019","12/26/2019","12/27/2019","12/28/2019","12/29/2019","12/30/2019","12/31/2019","1/1/2020","1/20/2020","2/17/2020","5/25/2020","7/3/2020","9/7/2020","11/26/2020","11/27/2020","12/25/2020","12/28/2020","12/29/2020","12/30/2020","12/31/2020"]}function d(){o.session={academicTerm:"",sessionCode:"",sessionName:"",owningSchool:"",owningDepartment:"",userContact:"",userEmail:"",userPhone:"",firstDayOfClass:"",lastDayOfClass:"",lastDayForAddDrop:"",lastDayForEnrollmentOptionChange:"",lastDayForWithdrawal:"",firstDayOfFinals:"",firstDayForFinalGrading:"",lastDayForFinalGrading:"",isClassHeldAtUpc:null,uscCampusLocation:"",otherCampusLocation:"",rateType:"",ratePerUnitAmount:"",flatRateAmount:"",flatRateUnitsMin:"",flatRateUnitsMax:"",gradFlatRateUnitsMin:"",gradFlatRateUnitsMax:"",comments:"",sessionBreaks:[],sections:[],submitDate:"",specialFees:[]};o.sess001Dates={firstDayOfClass:"",lastDayOfClass:"",lastDayForAddDrop:"",lastDayForWithdrawal:"",lastDayForEnrollmentOptionChange:"",firstDayForFinalGrading:"",lastDayForFinalGrading:"",sessBreak1Begin:"",sessBreak1End:"",sessBreak2Begin:"",sessBreak2End:""};o.requireUSCLoc=!1;o.requireOtherLoc=!1;o.requireUnitRange=!1;o.ratesOK=!0;o.usedFees=[];o.requireFees=!1;return}function g(){var n=!0;switch(o.session.isClassHeldAtUpc){case"true":break;case"false":o.requireUSCLoc=!1;o.requireOtherLoc=!1;o.session.uscCampusLocation==""?(n=!1,o.requireUSCLoc=!0,alert("Please specify the USC Campus Location.")):o.session.uscCampusLocation=="OTH"&&o.session.otherCampusLocation==""&&(n=!1,o.requireOtherLoc=!0,alert("Please specify the USC Campus Location."));break;default:n=!1}return n}function nt(){var n=!0,t="";if((o.session.rateType=="OTH"||o.session.rateType=="OTHU")&&(parseInt(o.session.ratePerUnitAmount)>0||(t="The Tuition per Unit must have an amount greater than zero.",n=!1),n&&o.session.rateType=="OTH"))switch(!0){case!(parseInt(o.session.flatRateAmount)>0):t="The Tuition Flat Rate amount must have an amount greater than zero.";n=!1;break;case parseInt(o.session.ratePerUnitAmount)>=parseInt(o.session.flatRateAmount):t="The Tuition Flat Rate must be greater than the Tuition per Unit amount.";n=!1;o.ratesOK=!1;break;default:o.ratesOK=!0}if(o.session.flatRateAmount>"")switch(!0){case typeof o.session.flatRateUnitsMin=="undefined":case!(parseInt(o.session.flatRateUnitsMin)>0):t="The Flat Rate Range minimum units should be between 1 and "+(o.MAXUNITS-1)+".";o.requireUnitRange=!0;n=!1;break;case typeof o.session.flatRateUnitsMax=="undefined":case!(parseInt(o.session.flatRateUnitsMax)>1):t="The Flat Rate Range maximum units should be between 2 and "+o.MAXUNITS+".";o.requireUnitRange=!0;n=!1;break;case parseInt(o.session.flatRateUnitsMax)<=parseInt(o.session.flatRateUnitsMin):t="The flat rate maximum units should be more than the minimum units.";o.requireUnitRange=!0;n=!1;break;default:o.requireUnitRange=!1}return t>""&&alert(t),n}function tt(){var n=!0,t=!1,i,r;for(o.requireFees=!1,angular.forEach(o.session.specialFees,function(i){t=!1;switch(!0){case i.feeCode>"":t=!0;(parseInt(i.amount)<0||parseInt(i.amount)>1e4||i.amount==""||isNaN(i.amount))&&(n=!1,o.requireFees=!0,alert("Special Fee amounts should be between 1 and 10000."));break;case i.amount>"":t=!0;i.feeCode==""&&(n=!1,o.requireFees=!0,alert("Please indicate the code for each Special Fee."))}if(n)switch(!0){case t&&i.assessedTo=="":n=!1;o.requireFees=!0;alert("Please indicate to where each Special Fee is to be assessed to.");break;case!t&&i.assessedTo>"":n=!1;o.requireFees=!0;alert("Please indicate all Special Fee Codes and amounts.")}}),i="",r=0;r<o.session.specialFees.length;++r)if(i=o.session.specialFees[r],i.assessedTo==""&&i.feeCode==""&&i.amount==""){o.session.specialFees.splice(r,1);break}return n}function it(){var i=!0,t="",n;if(o.requireBreaks=!1,o.session.sessionBreaks.length==0)t="Either check the No Breaks checkbox or enter Session Breaks",i=!1,o.requireBreaks=!0;else for(n=0;n<o.session.sessionBreaks.length;++n)(o.session.sessionBreaks[n].startDate==""||o.session.sessionBreaks[n].endDate=="")&&(t="Either enter Session Breaks or check the No Breaks checkbox.",i=!1,o.requireBreaks=!0);return t>""&&alert(t),i}function rt(){for(var n=!0,i=[o.session.academicTerm,o.sessCode.value(),o.session.firstDayOfClass,o.session.lastDayOfClass,o.session.firstDayOfFinals,o.session.lastDayOfFinals],t=0;t<i.length;++t)if(i[t].length==0){n=!1;break}return n&&(n=g()),n&&(n=nt()),n&&(o.noBreaks||(n=it())),n&&o.session.specialFees.length>0&&(n=tt()),n}o.MAXUNITS=40;o.AddSemesterBreaks=function(){o.session.sessionBreaks.length==2?alert("A maximum of 2 semester breaks are allowed per session."):o.session.sessionBreaks.push({startDate:"",endDate:""});return};o.AddSpecialFee=function(){o.session.specialFees.push({feeCode:"",amount:"",assessedTo:""})};Date.dateDiff=function(n,t,i){n=n.toLowerCase();var r=i-t;return Math.floor(r/{w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3}[n])};o.ClassDatesChanged=function(){var t,n,i,r;if(o.classStartDt=new Date(o.session.firstDayOfClass),o.session.firstDayOfClass>""){if(t=new Date(o.session.firstDayOfClass),t<p){alert("Class Start Date is an invalid date.");o.session.firstDayOfClass="";return}o.classEndOptions={min:o.classStartDt}}if(o.session.lastDayOfClass>""){if(n=new Date(o.session.lastDayOfClass),n<t){alert("Class End Date cannot be earlier than the Class Start Date.");o.session.lastDayOfClass="";return}o.finalsStartOptions={min:n}}return o.session.firstDayOfClass>""&&o.session.lastDayOfClass>""&&(o.sess001Dates.firstDayOfClass>""&&o.sess001Dates.lastDayOfClass>""?(i=new Date(o.sess001Dates.firstDayOfClass),r=new Date(o.sess001Dates.lastDayOfClass),o.classStartDt.toDateString()==i.toDateString()&&n.toDateString()==r.toDateString()?(o.session.lastDayForAddDrop=o.sess001Dates.lastDayForAddDrop,o.session.lastDayForEnrollmentOptionChange=o.sess001Dates.lastDayForEnrollmentOptionChange,o.session.lastDayForWithdrawal=o.sess001Dates.lastDayForWithdrawal,o.session.firstDayOfFinals=o.sess001Dates.firstDayOfFinals,o.session.lastDayOfFinals=o.sess001Dates.lastDayOfFinals,o.FinalsDatesChanged()):y(o.classStartDt,n)):y(o.classStartDt,n)),null};o.FinalsDatesChanged=function(){var t,e,r,f,i;if(o.session.firstDayOfFinals>""){if(t=new Date(o.session.firstDayOfFinals),e=new Date(o.session.lastDayOfClass),t<e){alert("Finals Start Date cannot be earlier than the Class End Date.");o.session.firstDayOfFinals="";return}o.finalsEndOptions={min:t}}if(o.session.lastDayOfFinals>""&&(r=new Date(o.session.lastDayOfFinals),r<t)){alert("Finals End Date cannot be earlier than the Finals Start Date.");o.session.lastDayOfFinals="";return}if(o.session.firstDayOfFinals>""&&o.session.lastDayOfFinals>""){o.session.firstDayForFinalGrading=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear();var n=new Date(r),u=!1,s="";for(f=0;f<4;++f){u=!1;do n.setDate(n.getDate()+1),s=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear(),u=n.getDay()==0||n.getDay()==6||a.indexOf(s)>-1?!0:!1;while(u)}i=n;o.session.lastDayForFinalGrading=i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear()}};o.AddSection=function(){o.session.sections.push({sectionNumber:"",prefix:"",title:"",courseNumber:"",unitValue:0,instructorName:"",estimatedEnrollment:0,incomeAccountNumber:"",comments:"",schedules:[]});return};o.AddSchedule=function(n){n.schedules.push({classDayOfWeek:"",classStartTime:"",classEndTime:""});return};o.GetSpecialFeesByTerm=function(){e.query({term:o.session.academicTerm},function(n){o.SpecialFeeList=n},function(n){o.SpecialFeeList="";alert("No Special Fee Codes found for term "+o.session.academicTerm);console.log(n)})};o.GetDatesAndRates=function(){function n(n,t){for(var r=!1,u=[],i=0;i<n.length;++i)n[i].term==t&&(r=!0,u=n[i]);return r?u.termRates.map(function(n){return{rateCode:n.rateTypeCode,rateName:n.rateTypeDesc}}):[]}i.get({semester:o.session.academicTerm},function(n){n.classBeginDate==undefined?alert("No Session 001 dates found for semester "+o.session.academicTerm):(o.sess001Dates.firstDayOfClass=l(n.classBeginDate),o.sess001Dates.lastDayOfClass=l(n.classEndDate),o.sess001Dates.lastDayForAddDrop=l(n.lastAddDropDate),o.sess001Dates.lastDayForWithdrawal=l(n.withdrawWithWDate),o.sess001Dates.lastDayForEnrollmentOptionChange=l(n.lastEnrollmentOptionDate),o.sess001Dates.sessBreak1Begin=l(n.break1BeginDate),o.sess001Dates.sessBreak1End=l(n.break1EndDate),o.sess001Dates.sessBreak2Begin=l(n.break2BeginDate),o.sess001Dates.sessBreak2End=l(n.break2EndDate),o.sess001Dates.firstDayOfFinals=l(n.finalExamBeginDate),o.sess001Dates.lastDayOfFinals=l(n.finalExamEndDate))},function(){console.log("No Session 001 dates found for semester "+o.session.academicTerm);o.sess001Dates.firstDayOfClass="";o.sess001Dates.lastDayOfClass="";o.sess001Dates.lastDayForAddDrop="";o.sess001Dates.lastDayForWithdrawal="";o.sess001Dates.lastDayForEnrollmentOptionChange="";o.sess001Dates.firstDayForFinalGrading="";o.sess001Dates.lastDayForFinalGrading="";o.sess001Dates.sessBreak1Begin="";o.sess001Dates.sessBreak1End="";o.sess001Dates.sessBreak2Begin="";o.sess001Dates.sessBreak2End="";o.sess001Dates.firstDayOfFinals="";o.sess001Dates.lastDayOfFinals=""});o.rateTypes=n(o.rates,o.session.academicTerm);o.rateTypes.sort(function(n,t){var i=n.rateName.toUpperCase(),r=t.rateName.toUpperCase();return i<r?-1:i>r?1:0});o.rateTypes.push({rateCode:"OTHU",rateName:"Other Unit Rate"},{rateCode:"OTH",rateName:"Other Flat Rate"});o.session.rateType>""&&o.SetRates();o.GetSpecialFeesByTerm();return};o.SetRates=function(){if(o.session.rateType=="ZERO"?(o.session.flatRateUnitsMin=98,o.session.flatRateUnitsMax=99,$("#flatUnitsMin").prop("readonly",!0),$("#flatUnitsMax").prop("readonly",!0),o.session.gradFlatRateUnitsMin=98,o.session.gradFlatRateUnitsMax=99,$("#gradFlatUnitsMin").prop("readonly",!0),$("#gradFlatUnitsMax").prop("readonly",!0)):(o.session.flatRateUnitsMin="",o.session.flatRateUnitsMax="",$("#flatUnitsMin").prop("readonly",!1),$("#flatUnitsMax").prop("readonly",!1),o.session.gradFlatRateUnitsMin="",o.session.gradFlatRateUnitsMax="",$("#gradFlatUnitsMin").prop("readonly",!1),$("#gradFlatUnitsMax").prop("readonly",!1)),o.session.flatRateAmount="",o.session.ratePerUnitAmount="",o.unitRateRequired=!1,o.session.academicTerm>"")switch(o.session.rateType){case"OTH":o.unitRateRequired=!0;o.flatRateRequired=!0;o.session.flatRateUnitsMin="";o.session.flatRateUnitsMax="";o.session.gradFlatRateUnitsMin="";o.session.gradFlatRateUnitsMax="";break;case"OTHU":o.unitRateRequired=!0;o.flatRateRequired=!1;o.session.flatRateUnitsMin=98;o.session.flatRateUnitsMax=99;o.session.gradFlatRateUnitsMin=98;o.session.gradFlatRateUnitsMax=99;break;default:o.unitRateRequired=!1;o.flatRateRequired=!1;angular.forEach(o.rates,function(n){n.term==o.session.academicTerm&&angular.forEach(n.termRates,function(n){if(n.rateTypeCode==o.session.rateType){n.rateTypeUnitRate==""&&n.rateTypeFlatRate==""?(o.session.ratePerUnitAmount="TBA",o.session.flatRateAmount="TBA",o.MAXUNITS=99):(o.session.ratePerUnitAmount=n.rateTypeUnitRate,o.session.flatRateAmount=n.rateTypeFlatRate,o.MAXUNITS=40);switch(!0){case o.session.ratePerUnitAmount=="TBA"&&o.session.flatRateAmount=="TBA":o.session.flatRateUnitsMin="";o.session.flatRateUnitsMax="";o.session.gradFlatRateUnitsMin="";o.session.gradFlatRateUnitsMax="";break;case n.rateTypeCode=="ZERO":case n.rateTypeFlatRate=="":o.session.flatRateUnitsMin=98;o.session.flatRateUnitsMax=99;o.session.gradFlatRateUnitsMin=98;o.session.gradFlatRateUnitsMax=99;break;default:o.session.flatRateUnitsMin="";o.session.flatRateUnitsMax="";o.session.gradFlatRateUnitsMin="";o.session.gradFlatRateUnitsMax=""}}})})}return};o.checkSessBreak=function(n){var r=o.session.sessionBreaks[n].startDate,t="",i,u,f;r>""&&(i=new Date(r),i<p?(t="Entered date is from a previous semester.",o.session.sessionBreaks[n].startDate=""):(u=o.session.sessionBreaks[n].endDate,f=new Date(u),i>f&&(t="Entered Session Begin Date is later than Session End Date.",o.session.sessionBreaks[n].endDate="")));t>""&&alert(t);return};o.deleteBreaks=function(){o.noBreaks&&(o.session.sessionBreaks=[]);return};o.BlankOtherLocation=function(){o.session.uscCampusLocation!="OTH"&&o.session.otherCampusLocation>""&&(o.session.otherCampusLocation="");return};o.SubmitForm=function(){var i,r,n;if(o.formError="",!rt()){o.formError="* Please provide or correct the marked fields.";return}for(i=new Date,o.session.submitDate=i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear(),r=o.sessCode.value().trim(),o.session.sessionCode=r.substring(0,3),o.session.sessionName=r.substring(3),o.session.sessionName=o.session.sessionName.trim(),c.rateName="",n=0;n<o.rateTypes.length;++n)if(o.rateTypes[n].rateCode==o.session.rateType){c.rateName=o.rateTypes[n].rateName;break}o.session.ratePerUnitAmount=="TBA"&&o.session.flatRateAmount=="TBA"&&(o.session.ratePerUnitAmount=[],o.session.flatRateAmount=[]);c.savedSession=new t(o.session);o.spinningWheel.center().open();c.savedSession.$save(null,function(){alert("Submission successful");o.spinningWheel.center().close();h.url("/Result")},function(){alert("Error in submitting the form.");o.spinningWheel.center().close()});return};o.CheckRateAmount=function(n,t){if(o.session.rateType=="OTH"&&n<1&&alert("Please enter an amount greater than 0 in the "+t+" box."),n<1)alert("Please enter a "+t+" that is greater than 0.");else{var i=parseInt(o.session.flatRateAmount),r=parseInt(o.session.ratePerUnitAmount);i>0&&r>0&&r>i&&(alert("The Tuition Unit Rate amount cannot be higher than the Tuition Flat Rate amount."),o.ratesOK=!1)}};o.DeleteThisFee=function(n,t){o.session.specialFees.splice(n,1);var i=o.usedFees.indexOf(t);o.usedFees.splice(i,1)};o.checkForDuplicateFee=function(n,t){o.usedFees.indexOf(n)>-1?(alert("Fee code is already used. Choose a different one."),o.session.specialFees[t].feeCode=0):o.usedFees.push(n);return};o.rates=[];var a=[],p=new Date(f.sStart);$(document).ready(function(){r.get(function(n){var r=[],i=n.sessionCodes,t;if(i!=null)for(t=0;t<i.length;++t)r[t]=i[t].sessionCode+"  "+i[t].sessionDesc;o.sessionCodes=r});b();o.earliestDate=f.sStart;n.query(function(n){o.rates=n});o.campusLocs=u.query(function(){o.campusLocs.push({campusCode:"OTH",campusName:"Other Location"})});a=["1/2/2017","1/16/2017","2/20/2017","5/29/2017","7/3/2017","7/4/2017","9/14/2017","11/23/2017","11/24/2017","11/24/2017","12/25/2017","12/26/2017","12/27/2017","12/28/2017","12/29/2017","1/1/2018","1/15/2018","2/19/2018","5/28/2018","7/4/2018","9/3/2018","11/22/2018","11/23/2018","12/24/2018","12/25/2018","12/25/2018","12/26/2018","12/27/2018","12/28/2018","12/29/2018","12/30/2017","12/31/2018","1/1/2019","1/21/2019","2/18/2019","5/27/2019","7/4/2019","7/5/2019","9/2/2019","11/28/2019","11/29/2019","12/25/2019","12/26/2019","12/27/2019","12/28/2019","12/29/2019","12/30/2019","12/31/2019","1/1/2020","1/20/2020","2/17/2020","5/25/2020","7/3/2020","9/7/2020","11/26/2020","11/27/2020","12/25/2020","12/28/2020","12/29/2020","12/30/2020","12/31/2020"];o.session={academicTerm:"",sessionCode:"",sessionName:"",owningSchool:"",owningDepartment:"",userContact:"",userEmail:"",userPhone:"",firstDayOfClass:"",lastDayOfClass:"",lastDayForAddDrop:"",lastDayForEnrollmentOptionChange:"",lastDayForWithdrawal:"",firstDayOfFinals:"",firstDayForFinalGrading:"",lastDayForFinalGrading:"",isClassHeldAtUpc:null,uscCampusLocation:"",otherCampusLocation:"",rateType:"",ratePerUnitAmount:"",flatRateAmount:"",flatRateUnitsMin:"",flatRateUnitsMax:"",comments:"",sessionBreaks:[],sections:[],submitDate:""};k();d()})}]);sessionModule.controller("sessionResultCtrl",["Sessions","$scope","$location","$rootScope","GetSpecialFeeCodes","CampusLocations",function(n,t,i,r,u,f){t.session=r.savedSession;t.rateName=r.rateName;var e=t.session.sessionBreaks;switch(e.length){case 2:t.session.sessionBreakStart_2=e[1].startDate;t.session.sessionBreakEnd_2=e[1].endDate;case 1:t.session.sessionBreakStart_1=e[0].startDate;t.session.sessionBreakEnd_1=e[0].endDate;break;default:t.session.sessionBreakStart_2="";t.session.sessionBreakEnd_2=""}r.savedSession.ratePerUnitAmount==null&&r.savedSession.flatRateAmount==null&&(t.session.ratePerUnitAmount="TBA",t.session.flatRateAmount="TBA");t.session.uscCampusLocation?f.query(function(n){t.campusName=getCampusLocation(t.session.uscCampusLocation,n)}):t.campusName="";u.query({term:t.session.academicTerm},function(n){t.SpecialFeeList=n});t.getFeeDescription=function(n){return GetFeeDescription(n,t.SpecialFeeList)};t.assessDecode=function(n){var t="";switch(n){case"G":t="Graduate";break;case"U":t="Undergraduate";break;case"B":t="All"}return t}}]);sessionModule.directive("numbersOnly",function(){return{require:"ngModel",link:function(n,t,i,r){function u(n){if(n){var t=n.replace(/[^0-9]/g,"");return t!==n&&(r.$setViewValue(t),r.$render()),t}return undefined}r.$parsers.push(u)}}});